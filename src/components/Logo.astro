---
interface Props {
  size?: 'sm' | 'md' | 'lg' | 'xl';
  animated?: boolean;
  showIcon?: boolean;
}

const { size = 'md', animated = false, showIcon = true } = Astro.props;

const sizeConfig = {
  sm: { text: 'text-lg', iconSize: 22, gap: 'gap-1.5' },
  md: { text: 'text-xl', iconSize: 26, gap: 'gap-2' },
  lg: { text: 'text-4xl', iconSize: 44, gap: 'gap-3' },
  xl: { text: 'text-5xl md:text-6xl', iconSize: 60, gap: 'gap-3 md:gap-4' },
};

const config = sizeConfig[size];
const animClass = animated ? 'logo-animated' : '';
---

<span class={`logo-container font-bold tracking-tight inline-flex items-center ${config.text} ${config.gap} ${animClass}`}>
  {showIcon && (
    <svg 
      class="logo-book flex-shrink-0"
      width={config.iconSize}
      height={config.iconSize}
      viewBox="0 0 48 48" 
      fill="none" 
      xmlns="http://www.w3.org/2000/svg"
      aria-hidden="true"
    >
      <!-- Open book shape -->
      <path 
        d="M24 8C24 8 18 6 10 6C6 6 4 7 4 7V38C4 38 6 37 10 37C18 37 24 40 24 40C24 40 30 37 38 37C42 37 44 38 44 38V7C44 7 42 6 38 6C30 6 24 8 24 8Z"
        stroke="currentColor"
        stroke-width="2.5"
        stroke-linecap="round"
        stroke-linejoin="round"
        fill="none"
        class="book-main"
      />
      
      <!-- Center spine -->
      <path 
        d="M24 8V40"
        stroke="currentColor"
        stroke-width="2.5"
        stroke-linecap="round"
        class="book-main"
      />
      
      <!-- Page lines - left -->
      <path 
        d="M10 14H18M10 20H18M10 26H16"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        class="book-lines"
      />
      
      <!-- Neural network nodes on right page -->
      <circle cx="31" cy="16" r="2.5" fill="currentColor" class="book-node"/>
      <circle cx="38" cy="16" r="2.5" fill="currentColor" class="book-node"/>
      <circle cx="34.5" cy="24" r="2.5" fill="currentColor" class="book-node"/>
      <circle cx="31" cy="32" r="2.5" fill="currentColor" class="book-node"/>
      <circle cx="38" cy="32" r="2.5" fill="currentColor" class="book-node"/>
      
      <!-- Neural connections -->
      <path 
        d="M31 16L34.5 24M38 16L34.5 24M34.5 24L31 32M34.5 24L38 32"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        class="book-connections"
      />
      
      <!-- Sparkles -->
      <circle cx="8" cy="3" r="2" fill="currentColor" class="sparkle s1"/>
      <circle cx="42" cy="3" r="1.5" fill="currentColor" class="sparkle s2"/>
      <circle cx="46" cy="14" r="1.5" fill="currentColor" class="sparkle s3"/>
    </svg>
  )}
  <span class="logo-text">
    <span class="logo-ai">AI</span><span class="logo-pedia">pedia</span>
  </span>
</span>

<style>
  .logo-container {
    font-family: 'Inter', system-ui, sans-serif;
    font-weight: 800;
    letter-spacing: -0.03em;
  }

  /* Book icon colors */
  .logo-book {
    color: #7c3aed;
    filter: drop-shadow(0 0 8px rgba(124, 58, 237, 0.4));
    transition: filter 0.3s ease, transform 0.3s ease;
  }

  .book-lines {
    opacity: 0.6;
  }

  .book-connections {
    opacity: 0.8;
  }

  /* Dark mode */
  :global(.dark) .logo-book {
    color: #a78bfa;
    filter: drop-shadow(0 0 12px rgba(167, 139, 250, 0.5));
  }

  /* Sparkle animation */
  .logo-animated .sparkle {
    animation: twinkle 2s ease-in-out infinite;
  }

  .logo-animated .s1 { animation-delay: 0s; }
  .logo-animated .s2 { animation-delay: 0.6s; }
  .logo-animated .s3 { animation-delay: 1.2s; }

  @keyframes twinkle {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 1; }
  }

  /* Book hover effect */
  .logo-container:hover .logo-book {
    filter: drop-shadow(0 0 12px rgba(139, 92, 246, 0.5));
    transform: rotate(-3deg) scale(1.05);
  }

  :global(.dark) .logo-container:hover .logo-book {
    filter: drop-shadow(0 0 16px rgba(167, 139, 250, 0.6));
  }

  /* AI text - gradient */
  .logo-ai {
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #ec4899 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 8px rgba(139, 92, 246, 0.3));
  }

  :global(.dark) .logo-ai {
    background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 50%, #f472b6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    filter: drop-shadow(0 0 12px rgba(167, 139, 250, 0.4));
  }

  /* pedia text */
  .logo-pedia {
    color: rgb(var(--color-text));
    opacity: 0.9;
  }

  /* Animated gradient */
  .logo-animated .logo-ai {
    animation: gradient-shift 3s ease-in-out infinite;
    background-size: 200% 200%;
  }

  @keyframes gradient-shift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }

  /* Hover glow */
  .logo-container:hover .logo-ai {
    filter: drop-shadow(0 0 16px rgba(139, 92, 246, 0.5));
    transition: filter 0.3s ease;
  }

  :global(.dark) .logo-container:hover .logo-ai {
    filter: drop-shadow(0 0 20px rgba(167, 139, 250, 0.6));
  }
</style>
